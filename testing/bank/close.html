<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Close account </title>
    <style>
        form {
           display: flex;
           flex-direction: column;
           align-items: center;
		   margin-top: 50px;
				max-width: 500px;
				margin: 0 auto;
				padding: 20px;
				background-color: #ffffffb3;
				border-radius: 10px;
				box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
		  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
			
        }
        body{
			background-image: url(d12.gif);
			background-repeat: no-repeat;
			background-size: cover;
		}
        label {
           font-weight: bold;
        }
        
        input[type="text"], textarea {
           padding: 8px;
           border: 1px solid #ccc;
           border-radius: 4px;
           box-sizing: border-box;
           width: 50%;
           margin-bottom: 16px;
        }
        
        input[type="submit"] {
           background-color: #4CAF50;
           color: white;
           padding: 12px 20px;
           border: none;
           border-radius: 4px;
           cursor: pointer;
        }
        
        input[type="submit"]:hover {
           background-color: #45a049;
        }
     </style>     
</head>
<body>
    <form method="post" action="close_account.php" id="close_account_form">
        <label for="account_number">Account Number:</label>
        <input type="text" id="account_number" name="account_number" required><br><br>
        <label for="reason">Reason for Closure:</label>
        <textarea id="reason" name="reason" required></textarea><br><br>
        <input type="submit" value="Close Account">
     </form>
     
     <script>
        const form = document.getElementById('close_account_form');
        const accountNumberInput = document.getElementById('account_number');
        const reasonInput = document.getElementById('reason');
     
        form.addEventListener('submit', (event) => {
           event.preventDefault();
           
           // Validate form data
           if (accountNumberInput.value.trim() === '' || reasonInput.value.trim() === '') {
              alert('Please provide both an account number and a reason for closure.');
           } else {
              // Submit the form
              form.submit();
           }
        });
     
        // Check if the account was closed
        
          
                  // Submit the form
                  const xhr = new XMLHttpRequest();
                  xhr.open('POST', 'close_account.php');
                  xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
                  xhr.onload = () => {
                     if (xhr.status === 200 && xhr.responseText === 'success') {
                        alert('Your account has been closed.');
                        form.reset();
                     } else {
                        alert('There was an error closing your account. Please try again.');
                     }
                  };
                  xhr.send(`account_number=${accountNumberInput.value}&reason=${reasonInput.value}`);
               
            ;
         
            // Check if the account was closed
            const urlParams = new URLSearchParams(window.location.search);
            const closed = urlParams.get('closed');
         
            if (closed) {
               alert('Your account has been closed.');
            }
         </script>
         
</body>
</html>

